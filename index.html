<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Out of Body Pest Control — Bed Bug Exterminator & Removal in Toronto</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#000066;
      --hover:#66ccff;
      --fade:1800ms;                  /* crossfade duration */
      --pad:clamp(10px,2.2vw,22px);
      --gap:clamp(12px,2.2vh,20px);
      --maxw:100ch;                   /* keep lead on one line */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--brand);
      overflow:hidden;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
    }

    /* Slideshow behind content */
    #slideshow{ position:fixed; inset:0; z-index:-1; overflow:hidden; background:#fff; }
    .slide{ position:absolute; inset:0; opacity:0; transition:opacity var(--fade) ease-in-out; }
    .slide.show{ opacity:1; }
    .slide picture, .slide img{ width:100%; height:100%; display:block; }
    .slide img{ object-fit:cover; background:#fff; }
    @media (prefers-reduced-motion: reduce){ .slide{ transition:none } }

    /* Overlay content (left-ruled) */
    .overlay{
      position:fixed; left:var(--pad); top:var(--pad);
      display:flex; flex-direction:column; gap:var(--gap);
      max-width:var(--maxw); text-align:left;
      text-shadow:0 1px 0 rgba(255,255,255,.35);
    }
    .logo{ align-self:flex-start; width:clamp(460px,56vw,1200px); height:auto; margin:0 0 clamp(14px,2.2vh,22px) 0; }

    p{ margin:0 }
    .tag{ font-weight:600; font-size: clamp(22px,2.5vw,30px); }
    .sub{ opacity:.95; font-size: clamp(20px,2.3vw,26px); }
    .lead{
      font-weight:700; font-size:clamp(24px,2.8vw,34px);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      margin-top:clamp(10px,1.2vh,14px);
    }
    .help-group{ margin-top:clamp(18px,14vh,22vh); display:flex; flex-direction:column; gap:.85rem; }
    .help{ opacity:.95; font-size:clamp(20px,2.3vw,26px); }
    .help-strong{ font-weight:800; font-size:clamp(24px,2.8vw,32px); }

    .links{ display:flex; gap:16px; flex-wrap:wrap; align-items:center; margin-top:clamp(16px,2.6vh,22px); }
    .links a{ color:var(--brand); font-weight:800; text-decoration:none; font-size:clamp(20px,2.3vw,24px) }
    .links a:hover{ color:var(--hover); text-decoration:underline }
    .sep{ opacity:.5 }

    footer.footnote{
      position:fixed; left:var(--pad); bottom:var(--pad);
      font-size:clamp(12px,1.3vw,14px); opacity:.9; text-shadow:0 1px 0 rgba(255,255,255,.35);
    }

    @media (max-width:480px),(max-height:560px){
      :root{ --gap:clamp(10px,1.8vh,16px); --maxw:90ch }
      .logo{ width:clamp(360px,70vw,820px) }
      .help-group{ margin-top:clamp(16px,12vh,18vh) }
      .lead{ white-space:normal; } /* only wrap on very tiny screens */
    }
  </style>
</head>
<body>

  <!-- Two persistent slides -->
  <div id="slideshow">
    <div id="slideA" class="slide show"><picture><img alt="" /></picture></div>
    <div id="slideB" class="slide"><picture><img alt="" /></picture></div>
  </div>

  <section class="overlay" role="region" aria-label="Intro">
    <img class="logo" src="images/brand/out-of-body-bed-bug-removal-extermination-toronto.webp"
         alt="Out of Body lettermark" width="1200" height="400" decoding="async">

    <p class="tag">Emotionally Attuned Pest Control.</p>
    <p class="sub">Toronto’s undercover bed bug specialist.</p>
    <p class="lead">The out of body experience begins here.</p>

    <div class="help-group">
      <p class="help">If you have pictures, share them.</p>
      <p class="help">If you have evidence, save it.</p>
      <p class="help-strong">Help is on the way.</p>
    </div>

    <p class="links">
      <a href="sms:+14164646411">TEXT</a>
      <span class="sep">•</span>
      <a href="mailto:hello@outofbody.ca">EMAIL</a>
    </p>
  </section>

  <footer class="footnote">Fully licensed &amp; guaranteed.</footer>

  <script>
    // ---------- CONFIG ----------
    const BASE = "bed-bug-exterminator-removal-toronto-";
    // Use 01 and 03–21 only (02 removed)
    const NUMBERS = [1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21];

    // paths
    const D1 = "images/desktop/";     // 1x fallback (safe base)
    const D2 = "images/desktop-2x/";  // 2x
    const M1 = "images/mobile/";      // 1x
    const M2 = "images/mobile-2x/";   // 2x

    // timing
    const fadeMs = 1800;
    const nextDelay = () => 2000 + Math.random()*2000; // 2–4s

    // ---------- HELPERS ----------
    const pad2 = n => String(n).padStart(2,"0");
    const nameFor = n => `${BASE}${pad2(n)}.webp`;

    // set sources into a <picture> element safely
    function setPictureSources(picEl, file) {
      picEl.innerHTML = ""; // clean
      const source = document.createElement("source");
      source.media  = "(max-width: 767px)";
      source.srcset = `${M1}${file} 1x, ${M2}${file} 2x`;

      const img = document.createElement("img");
      img.alt = "";
      img.src = `${D1}${file}`;
      img.srcset = `${D1}${file} 1x, ${D2}${file} 2x`;
      img.decoding = "async";

      // robust fallbacks to avoid white frames
      img.onerror = () => {
        img.onerror = null;
        img.src = `${D2}${file}`;
        img.onerror = () => {
          img.onerror = null;
          img.src = `${M1}${file}`;
        };
      };

      picEl.appendChild(source);
      picEl.appendChild(img);
      return img;
    }

    // ---------- SLIDESHOW (two persistent layers) ----------
    const slideA = document.getElementById("slideA");
    const slideB = document.getElementById("slideB");
    const picA = slideA.querySelector("picture");
    const picB = slideB.querySelector("picture");

    let idx = 0;         // index into NUMBERS
    let showingA = true; // which slide is currently visible

    // preload + show first
    const firstFile = nameFor(NUMBERS[idx]);
    const firstImg = setPictureSources(picA, firstFile);
    (firstImg.decode ? firstImg.decode().catch(()=>{}) : Promise.resolve()).finally(() => {
      slideA.classList.add("show");
      scheduleNext();
    });

    function scheduleNext(){
      setTimeout(swap, nextDelay());
    }

    function swap(){
      idx = (idx + 1) % NUMBERS.length;
      const file = nameFor(NUMBERS[idx]);

      const incomingSlide = showingA ? slideB : slideA;
      const incomingPic   = showingA ? picB   : picA;
      const outgoingSlide = showingA ? slideA : slideB;

      const img = setPictureSources(incomingPic, file);

      // Wait until the image is actually decoded before fading
      const ready = img.decode ? img.decode().catch(()=>{}) : Promise.resolve();
      ready.finally(() => {
        incomingSlide.classList.add("show");      // fade in
        setTimeout(() => {                        // after fade, hide the old one
          outgoingSlide.classList.remove("show"); // fade out completed
        }, fadeMs + 40);
        showingA = !showingA;
        scheduleNext();
      });
    }
  </script>
</body>
</html>
