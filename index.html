<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Out of Body Pest Control — Bed Bug Exterminator & Removal in Toronto</title>

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#000066;
      --brand-hover:#66ccff;       /* powder/robin's-egg hover */
      --fade:2000ms;               /* crossfade duration */
      --pad:clamp(10px,2.2vw,22px);
      --gap:clamp(12px,2.2vh,20px);
      --maxw:100ch;                /* allow the one-line 'lead' to fit */
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--brand);
      overflow:hidden; /* fixed pane */
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
    }

    /* Slideshow behind content */
    #slideshow, .slide { position: fixed; inset: 0; }
    #slideshow { z-index: -1; overflow: hidden; background:#fff; }
    .slide{
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--fade) ease-in-out, transform var(--fade) ease-in-out;
      transform: scale(1.015); /* subtle zoom */
      will-change: opacity, transform;
    }
    .slide.show    { opacity: 1; transform: scale(1); }
    .slide.fadeout { opacity: 0; transform: scale(1.005); }
    .slide img{ width:100%; height:100%; object-fit:cover; display:block; background:#fff; }
    @media (prefers-reduced-motion: reduce){ .slide{ transition:none; transform:none } }

    /* Left-aligned overlay */
    .overlay{
      position: fixed; left: var(--pad); top: var(--pad);
      display: flex; flex-direction: column; gap: var(--gap);
      max-width: var(--maxw); text-align: left;
      padding-right: max(12px, env(safe-area-inset-right));
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    /* Big logo, flush-left */
    .logo{
      align-self:flex-start;
      width: clamp(460px, 56vw, 1200px);
      height:auto;
      margin: 0 0 clamp(14px,2.2vh,22px) 0;
      display:block;
    }

    /* TYPE SCALE */
    p{ margin: 0 }
    .tag{ font-weight:600; font-size: clamp(22px,2.5vw,30px); }
    .sub{ opacity:.95; font-size: clamp(20px,2.3vw,26px); }

    /* Single-line lead between top block and help lines */
    .lead{
      font-weight:700;
      font-size: clamp(24px,2.8vw,34px);
      white-space: nowrap;        /* keep on one line */
      margin-top: clamp(10px,1.2vh,14px);
    }

    /* Help block */
    .help-group{
      margin-top: clamp(18px, 14vh, 22vh);
      display:flex; flex-direction:column; gap: .85rem;
    }
    .help{ opacity:.95; font-size: clamp(20px,2.3vw,26px); }
    .help-strong{ font-weight:800; font-size: clamp(24px,2.8vw,32px); }

    /* Links (more separated and prominent) */
    .links{
      display:flex; gap:16px; flex-wrap:wrap; align-items:center;
      margin-top: clamp(14px,2.2vh,18px);   /* more space from help lines */
    }
    .links a{ color:var(--brand); text-decoration:none; font-weight:800; font-size: clamp(20px,2.3vw,24px) }
    .links a:hover{ color:var(--brand-hover); text-decoration:underline }
    .sep{ opacity:.5 }

    /* Footnote */
    footer.footnote{
      position: fixed; left: var(--pad); bottom: var(--pad);
      font-size: clamp(12px,1.3vw,14px);
      opacity:.9;
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    /* Guard tiny screens */
    @media (max-width: 480px), (max-height: 560px){
      :root{ --gap:clamp(10px,1.8vh,16px); --maxw:90ch }
      .logo{ width: clamp(360px, 70vw, 820px) }
      .help-group{ margin-top: clamp(16px, 12vh, 18vh); }
      .lead{ white-space: normal; } /* allow wrap only on very small screens */
    }
  </style>

  <!-- Preload a first desktop image (1×) to paint fast -->
  <link rel="preload" as="image" href="images/desktop/bed-bug-exterminator-removal-toronto-01.webp">
</head>
<body>

  <!-- Background slideshow -->
  <div id="slideshow" aria-hidden="true"></div>

  <!-- Overlay content -->
  <section class="overlay" role="region" aria-label="Intro">
    <img class="logo"
         src="images/brand/out-of-body-bed-bug-removal-extermination-toronto.webp"
         alt="Out of Body lettermark" width="1200" height="400" decoding="async">

    <p class="tag">Emotionally Attuned Pest Control.</p>
    <p class="sub">Toronto’s undercover bed bug specialist.</p>

    <!-- single line, positioned between the blocks -->
    <p class="lead">The out of body experience begins here.</p>

    <div class="help-group">
      <p class="help">If you have pictures, share them.</p>
      <p class="help">If you have evidence, save it.</p>
      <p class="help-strong">Help is on the way.</p>
    </div>

    <p class="links">
      <a href="sms:+14164646411">TEXT</a>
      <span class="sep">•</span>
      <a href="mailto:hello@outofbody.ca">EMAIL</a>
    </p>
  </section>

  <footer class="footnote" aria-label="Licensing">Fully licensed &amp; guaranteed.</footer>

  <noscript>
    <picture class="slide show">
      <source media="(max-width: 767px)" srcset="images/mobile/bed-bug-exterminator-removal-toronto-01.webp">
      <img src="images/desktop/bed-bug-exterminator-removal-toronto-01.webp" alt="">
    </picture>
  </noscript>

  <script>
    // === Slideshow with true crossfade & random 2–4s (excluding 02) ===
    const BASE = "bed-bug-exterminator-removal-toronto-";
    const D1  = "images/desktop/";
    const D2  = "images/desktop-2x/";
    const M1  = "images/mobile/";
    const M2  = "images/mobile-2x/";

    // Use 01 and 03–21 only
    const ACTIVE = [1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21];

    const slideshow = document.getElementById("slideshow");
    let idx = 0;
    let current = null;

    const pad = n => String(n).padStart(2,"0");
    const randDelay = () => 2000 + Math.random() * 2000; // 2–4s
    const fadeMs = (() => {
      const v = getComputedStyle(document.documentElement).getPropertyValue('--fade').trim();
      const m = v.match(/([\d.]+)ms/);
      return m ? parseFloat(m[1]) : 2000;
    })();

    function makePicture(num){
      const picture = document.createElement("picture");
      picture.className = "slide";

      // MOBILE 1x/2x
      const source = document.createElement("source");
      source.media  = "(max-width: 767px)";
      source.srcset = `${M1}${BASE}${num}.webp 1x, ${M2}${BASE}${num}.webp 2x`;
      picture.appendChild(source);

      // DESKTOP 1x/2x (robust fallback)
      const img = document.createElement("img");
      img.alt = "";

      // load 1x first; srcset upgrades to 2x automatically
      img.src    = `${D1}${BASE}${num}.webp`;
      img.srcset = `${D1}${BASE}${num}.webp 1x, ${D2}${BASE}${num}.webp 2x`;

      // if 1x missing, fallback to 2x to avoid white frame
      img.onerror = () => { img.onerror = null; img.src = `${D2}${BASE}${num}.webp`; };

      picture.appendChild(img);
      return picture;
    }

    function preload(i){
      const n = ACTIVE[i % ACTIVE.length];
      const num = pad(n);
      new Image().src = `${D1}${BASE}${num}.webp`;
      new Image().src = `${M1}${BASE}${num}.webp`;
    }

    function scheduleNext(){ setTimeout(next, randDelay()); }

    (function init(){
      const firstNum = pad(ACTIVE[idx]);
      current = makePicture(firstNum);
      current.classList.add("show");
      slideshow.appendChild(current);
      preload(idx+1); preload(idx+2);
      scheduleNext();
    })();

    function next(){
      idx = (idx + 1) % ACTIVE.length;
      const num = pad(ACTIVE[idx]);

      const incoming = makePicture(num);
      slideshow.appendChild(incoming);

      // fade new in
      requestAnimationFrame(()=> incoming.classList.add("show"));

      // fade old out and remove after transition
      if (current){
        current.classList.remove("show");
        current.classList.add("fadeout");
        setTimeout(()=>{
          if (current && current.parentNode === slideshow) slideshow.removeChild(current);
        }, fadeMs + 80);
      }

      current = incoming;
      preload(idx+1);
      scheduleNext();
    }

    // Respect reduced motion
    if (window.matchMedia("(prefers-reduced-motion: reduce)").matches){
      while (slideshow.children.length > 1) slideshow.removeChild(slideshow.lastChild);
    }
  </script>
</body>
</html>
